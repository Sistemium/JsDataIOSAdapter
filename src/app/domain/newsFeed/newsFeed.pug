.news-feed.ui-view(cg-busy='vm.cgBusy')

  .buttons(ng-if='vm.isNewsMaker')

    button.btn.btn-link(
    ng-click='vm.createNewsMessageClick()'
    ) Добавить новость

  .no-news(ng-if='!vm.busy && !vm.newsMessages.length')
    p Новостей нет. Авторизованные пользователи могут добавить новость.

  .scroll-y(resize resize-offset-top='5' vs-repeat='170' resize-property='height')

    .news-message(
    ng-click='vm.newsMessageClick(newsMessage)'
    ng-repeat='newsMessage in vm.newsMessages track by newsMessage.id'
    )

      .header
        label.subject {{ newsMessage.subject }}
        valid-lifetime(date-b='newsMessage.dateB' date-e='newsMessage.dateE')

      .body
        p {{newsMessage.body}}
        //.author {{ newsMessage.authorAccount.name }}

      .footer

        .common-rating(
        ng-if='vm.showCommonRating(newsMessage)'
        ng-click='$event.stopPropagation()'
        )

          label Средняя оценка:

          strong {{ newsMessage.rating | number }}

          news-message-ratings-popover(news-message='newsMessage' ng-if='vm.isNewsMaker')
            span ({{ newsMessage.ratingsCount }})

        .rating(ng-if='!newsMessage.isAuthor()')

          label {{ vm.ratings[newsMessage.id] ? 'Ваша оценка:' : 'Оцените:' }}

          span(
          uib-rating
          enable-reset='false'
          titles='vm.ratingTitles'
          ng-model='vm.ratings[newsMessage.id]'
          max='5'
          ng-click='$event.stopPropagation();vm.newsRatingClick(newsMessage)'
          )

        .rating(ng-if='newsMessage.isAuthor()')
          span Вы автор
          span.hidden-xs &nbsp;этой новости
