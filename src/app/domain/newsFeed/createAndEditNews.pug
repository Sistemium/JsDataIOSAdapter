.create-and-edit-news.scroll-y(
resize
resize-offset-top='0'
resize-property='height'
)

  .duration(ng-class='{"warning": vm.newsMessage.dateB > vm.newsMessage.dateE }')
    label.control-label Период действия
    .date-pickers
      .begin
        span.pretext.control-label С
        sab-date-picker.help-style(
        value='vm.newsMessage.dateB'
        clear-text='Сегодня'
        )
      .end
        span.pretext.control-label По
        sab-date-picker(
        value='vm.newsMessage.dateE'
        min-date='vm.newsMessage.dateB'
        clear-text='Сегодня'
        )

    span#helpBlock3.help-block(ng-if='vm.newsMessage.dateB > vm.newsMessage.dateE') Дата введена некорректно

  form(
  name='vm.newsFeedForm'
  )
    .subject(ng-class='{"has-error": !vm.newsFeedForm.subject.$pristine && !vm.newsMessage.subject.length}')
      label.control-label(for='newsSubject') Тема
      input.form-control(
      type='text'
      ng-model='vm.newsMessage.subject'
      id='newsSubject'
      aria-describedby='helpBlock'
      name='subject'
      autocomplete='off'
      )
      span#helpBlock.help-block(
      ng-if=' !vm.newsFeedForm.subject.$pristine && !vm.newsMessage.subject.length'
      ) Поле обязательно для ввода

    .text(
    ng-class='{"has-error": !vm.newsFeedForm.body.$pristine && !vm.newsMessage.body.length}'
    )
      label.control-label(for='newsText') Текст
      textarea.form-control(
      type='text'
      rows='5'
      ng-model='vm.newsMessage.body'
      id='newsText'
      aria-describedby='helpBlock2'
      name='body'
      wrap='hard'
      )
      span#helpBlock2.help-block(
      ng-if='!vm.newsFeedForm.body.$pristine && !vm.newsMessage.body.length'
      ) Поле обязательно для ввода

    .version(ng-class='{"has-error": vm.newsFeedForm.version.$error.pattern ' +
    '|| !vm.newsFeedForm.version.$pristine && !vm.newsFeedForm.version.$viewValue}')

      label.control-label(for='version') Версия программы

      input.form-control(
      name='version'
      id='version'
      ng-model='vm.newsMessage.appVersion'
      ng-pattern='vm.regExForCurrVersion'
      aria-describedby='helpBlock4, helpBlock5'
      autocomplete='off'
      )

      span#helpBlock4.help-block(ng-if='vm.newsFeedForm.version.$error.pattern') Версия введена некорректно
      span#helpBlock5.help-block(ng-if='!vm.newsFeedForm.version.$pristine && !vm.newsFeedForm.version.$viewValue')
        | Поле обязательно для ввода

    .button-block
      button.btn.btn-primary(
      ng-if='vm.currentState === "create"'
      ng-click='vm.submitNews()'
      ng-disabled='!(vm.newsMessage.body.length && vm.newsMessage.subject.length && vm.newsMessage.appVersion)' +
      ' || vm.newsMessage.dateB > vm.newsMessage.dateE'
      ) Сохранить новость

      // TODO: buttons

      button.btn.btn-primary(
      ng-if='vm.currentState === "edit"'
      ng-disabled='!vm.newsHasChanges()'
      ng-click='vm.revertChanges()'
      ) Возвратить

      button.btn.btn-primary(
      disabled
      ng-if='vm.currentState === "edit"'
      ng-click='vm.updateNews()'
      ng-disabled='!(vm.newsMessage.body.length && vm.newsMessage.subject.length && vm.newsMessage.appVersion)' +
      ' || vm.newsMessage.dateB > vm.newsMessage.dateE' +
      ' || !vm.newsHasChanges()'
      ) Обновить новость
