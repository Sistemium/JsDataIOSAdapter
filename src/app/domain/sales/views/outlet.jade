h3.pull-left
  span {{ vm.outlet.partner.shortName }}
  = ' '
  small
    a.inherit-colors(href ng-click='vm.outletClick()' ng-class='{disabled: vm.disableNavs}') {{ vm.outlet.address }}

section.ui-view

  h3.pull-right.with-map
    button.btn.btn-default.ml-5(
    popover-placement="bottom-left auto"
    popover-trigger='outsideClick'
    uib-popover-template="'app/domain/sales/views/location.html'"
    popover-is-open='vm.popover'
    type='button'
    ng-class='{green: vm.map}'
    ng-disabled='!vm.map'
    )
      i.glyphicon.glyphicon-map-marker

  hr.clear-both

  div
    h4
      span(ng-hide='vm.photos.length') Фотографии
      a(ng-show='vm.photos.length' href ng-click='vm.togglePhotosSection()') Фотографии
        span &nbsp({{vm.photos.length}})
      button.btn.ml-em.btn-primary.pull-right.clear-right(ng-click='vm.takePhoto()')
        i.glyphicon.glyphicon-camera
    section.mt(ng-hide='vm.collapsePhotosSection|| !vm.photos.length')
      .col-xs-3.col-sm-2(ng-repeat='pic in vm.photos track by pic.id')
        a.thumbnail.mh-80(href ng-click='vm.thumbnailClick(pic)')
          img(ng-src='{{vm.thumbnails[pic.id]}}')
    hr.clear-both

  div
    h4
      span(ng-hide='vm.visits.length') Визиты
      a(ng-show='vm.visits.length' href ng-click='vm.toggleVisitsSection()') Визиты
        span &nbsp({{vm.visits.length}})
      button.btn.ml-em.btn-primary.pull-right.clear-right(ng-click='vm.newVisitClick()')
        i.glyphicon.glyphicon-plus
    table.table.table-striped.clear-both(ng-hide='vm.collapseVisitsSection || !vm.visits.length')
      thead
        tr
          th Дата
          th.number Фото
          th.number Ответы
      tbody
        tr.clickable(ng-repeat='visit in vm.visits | orderBy:"-deviceCts" track by visit.id' ng-click='vm.visitClick(visit)')
          td {{ visit.deviceCts | amUtc | amLocal | amCalendar }}
          td.number {{ visit.photos.length | number: 0 }}
          td.number {{ visit.answers.length | number: 0 }}
    hr.clear-both
